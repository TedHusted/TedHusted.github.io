<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>ted.husted.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Ted Husted is a coder, writer, and speaker. All told, Ted has been creating and deploying business applications since 1984, first for the desktop, then for the Internet, and now for the Cloud.">
<meta property="og:type" content="website">
<meta property="og:title" content="ted.husted.com">
<meta property="og:url" content="http://ted.husted.com/page/9/index.html">
<meta property="og:site_name" content="ted.husted.com">
<meta property="og:description" content="Ted Husted is a coder, writer, and speaker. All told, Ted has been creating and deploying business applications since 1984, first for the desktop, then for the Internet, and now for the Cloud.">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ted.husted.com">
<meta name="twitter:description" content="Ted Husted is a coder, writer, and speaker. All told, Ted has been creating and deploying business applications since 1984, first for the desktop, then for the Internet, and now for the Cloud.">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '92185980', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
</html>
<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/atom.xml">RSS</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://ted.husted.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-failing-safe-with-the-apex-data-loader-for-salesforce" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/failing-safe-with-the-apex-data-loader-for-salesforce/">Failing safe with the Apex Data Loader for Salesforce</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2012/failing-safe-with-the-apex-data-loader-for-salesforce/" class="article-date">
  <time datetime="2012-04-07T13:00:00.000Z" itemprop="datePublished">2012-04-07</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/tutorial/">Tutorial</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <div class="separator" style="clear:both;text-align:center;"><a href="http://blog.domaintools.com/2011/08/how-to-use-alerts-to-get-the-scoop-on-your-competitors/" target="_blank" rel="noopener"><br><img src="http://blog.domaintools.com/wp-content/uploads/2011/08/Alerts1.jpg" alt=""></a></div><br><div style="font-family:Arial;">If you have a way to pull and format data from another system, the <strong>Apex Data Loader</strong> is a great, on-demand way to push data into <strong>Salesforce CRM</strong>. Without much effort, you can automate the process and create a hands-free data sync. The tricky part is that while the Data Loader creates excellent logs, there’s no obvious way to alert a person when a data sync fails. Once a system is in place, failures are rare, but, in real life, stuff happens, and it’s helpful if failsafes are in place.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">A key problem is that the Apex Data Loader writes an error log whether there are errors or not. If the pass is 100% successful, the error log will have a header line and no rows.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">If the error log was only written when errors occurred, we could just look for the error logs, and process the files whenever they crop up. But, in this case, we first need to look inside the log and count the lines before we can be sure there was a failure.</div><br><div style="font-family:Arial;"></div><br><div><a name="more"></a><span class="Apple-style-span" style="font-family:Arial;">On a Windows-based system, one solution is to use a VB script, like </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">COUNTLN.VBS</span><span class="Apple-style-span" style="font-family:Arial;">, to count the number of lines in a file. </span></div><br><div style="font-family:Arial;"></div><br><div><br><br><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">‘ COUNTLN.VBS</span><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">‘ Description: Count the number of lines in a file and return as error level (up to 255)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">‘ Usage: cscript countln.vbs errors.csv</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">‘ Concept: <a href="http://blogs.technet.com/b/heyscriptingguy/archive/2004/10/12/how-can-i-count-the-number-of-lines-in-a-text-file.aspx" target="_blank" rel="noopener">http://blogs.technet.com/b/heyscriptingguy/archive/2004/10/12/how-can-i-count-the-number-of-lines-in-a-text-file.aspx</a></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">Const ForReading = 1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">Set objFSO = CreateObject(“Scripting.FileSystemObject”)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">Set objTextFile = objFSO.OpenTextFile (WScript.Arguments.Item(0), ForReading)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">objTextFile.ReadAll</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">‘ Wscript.Echo “Number of lines: “ &amp; objTextFile.Line</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">WScript.Quit(objTextFile.Line)</span></div><br></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">COUNTLN.VBS</span><span class="Apple-style-span" style="font-family:Arial;"> script sets the exit condition, which can then be tested in a DOS Batch file, like </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG.BAT</span><span class="Apple-style-span" style="font-family:Arial;">.</span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">@ECHO OFF</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">REM CHECKLOG.BAT</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">REM Count the lines and send the errors, if any</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ECHO CountLn: %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CSCRIPT ..\countln.vbs %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF ERRORLEVEL 1 ECHO Line Count: %errorlevel%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF ERRORLEVEL 3 ..\7z.exe a %2 %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ERASE %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ECHO Checklogs process complete.</span></div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">The Apex Data Loader takes as input a common-separated-value (CSV) or a tab-delimited file. The first row of the input file is a header detailing the input columns, with each subsequent row representing a record to be sent to the target Salesforce CRM object.</div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">When the Apex Data Loader runs, it creates an </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">success(ID).log</span><span class="Apple-style-span" style="font-family:Arial;"> and an </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">error(ID).log</span><span class="Apple-style-span" style="font-family:Arial;">. The (ID) is replaced with a timestamp shared by the companion success and error logs. Both logs contain a header row, and a row for each input row, detailing the data processed for each column. The success log contains all the rows that made it into Salesforce. The error logs contains all the rows that did not cross over. </span></div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">Conveniently, the logs can also be used as input files. If the errors can be easily fixed, you can resubmit the error log to the Apex Data Loader, without going back to the external system.</div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> file is designed to add the matching error files to a compressed archive file in the widely-supported ZIP format. Here we’re using the </span><a href="http://www.7-zip.org/" target="_blank" rel="noopener">open source 7z utility</a><span class="Apple-style-span" style="font-family:Arial;"> to create the archive, but others would work as well. In this way, if </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG</span><span class="Apple-style-span" style="font-family:Arial;"> is is not run as often as the Apex Data Loader itself, the process can support a single file or multiple files. And, if the data is sensitive, most ZIP utilities support encrypting the archive. </span></div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">Given a secure ZIP archive, email can be a great way to get the error logs to an administrator who can address the problems. Staying with our Windows platform theme, here’s another VB script that can send an email alert, with an attachment, to a Gmail account.</div><br><div style="font-family:Arial;"></div><br><div><br><br><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘Usage: cscript sendmail.vbs &lt;<a href="mailto:email_recipient@example.com" target="_blank" rel="noopener">email_recipient@example.com</a>&gt; “” “” “”</span><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘Ex. No attach: cscript sendmail.vbs <a href="mailto:example@gmail.com" target="_blank" rel="noopener">example@gmail.com</a> “test subject line” “test email body”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘Ex. W/ attach: cscript sendmail.vbs <a href="mailto:example@gmail.com" target="_blank" rel="noopener">example@gmail.com</a> “test subject line” “test email body” “c:\scripts\log.txt”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘Attachment path cannot be relative</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘Credit: <a href="http://cybernetnews.com/vbscript-send-emails-using-gmail/" target="_blank" rel="noopener">http://cybernetnews.com/vbscript-send-emails-using-gmail/</a></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘<strong><em> CONFIGURE THE FROM EMAIL ADDRESS AND PASSWORD </em></strong></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Const fromEmail = “(TBD)@gmail.com”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Const password = “(TBD)”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">‘<strong><em> END OF CONFIGURATION </em></strong></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Dim emailObj, emailConfig</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Set emailObj = CreateObject(“CDO.Message”)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailObj.From = fromEmail</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;"><a href="http://emailObj.To/" target="_blank" rel="noopener">emailObj.To</a> = WScript.Arguments.Item(0)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailObj.Subject = WScript.Arguments.Item(1)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailObj.TextBody = WScript.Arguments.Item(2)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">If WScript.Arguments.Count &gt; 3 Then</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailObj.AddAttachment WScript.Arguments.Item(3)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">End If</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Set emailConfig = emailObj.Configuration</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/smtpserver" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/smtpserver</a>“) = “<a href="http://smtp.gmail.com/" target="_blank" rel="noopener">smtp.gmail.com</a>“</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/smtpserverport" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/smtpserverport</a>“) = 465</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/sendusing" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/sendusing</a>“) = 2</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/smtpauthenticate" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/smtpauthenticate</a>“) = 1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/smtpusessl" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/smtpusessl</a>“) = true</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/sendusername" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/sendusername</a>“) = fromEmail</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields(“<a href="http://schemas.microsoft.com/cdo/configuration/sendpassword" target="_blank" rel="noopener">http://schemas.microsoft.com/cdo/configuration/sendpassword</a>“) = password</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailConfig.Fields.Update</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">emailObj.Send</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Set emailobj = nothing</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">Set emailConfig = nothing</span></div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;"></div><br></div><br><div style="font-family:Arial;">Of course, the notion is that you create a special Gmail account just to receive the alerts and then forward to an administrator from there.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">While we have the pieces in place for handling the error logs, there is also the problem of what to do with the success logs. The Apex Data Loader kindly generates both logs, that between them, contain all of the detail found in the original input file, for each and every pass.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">While this level of detail is great (really-really-great), if you are running a sync every five minutes, retrieving a log later can be a real “cant-see-the-forest–for-the-trees” headache.</div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">Long story short, in addition to error alerts, an automated Apex Data Loader sync also needs help with general log management. The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ARCHIVE.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> file is designed to be run at least once a day, but could also be run every hour. It sweeps all of the success logs into an archive for the current date, and, as discussed, emails the error logs to a Gmail account. </span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">To deploy the system, beneath the current logging folder (usually “Status”), create an Archive folder, and beneath that create Success and Error folders. Put the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ARCHIVE.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> and VBS files under the Archive folder (along with the 7z utility), and the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> under the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">Error</span><span class="Apple-style-span" style="font-family:Arial;"> folder. </span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">\Status</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">.\Archive</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- archive.bat</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- countln.vbs</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- sendmail.vbs</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- 7z.exe</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- 7z.dll</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- 7z-zip.dll</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">.\Archive\Error</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- checklog.bat</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">.\Archive\Success</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">- checklog.bat</span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">A call to </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">ARCHIVE.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> can be queued as a Windows Scheduled Task to run every hour, or once a day, depending on how often the Apex Data Loader runs. The system moves the logs out of .\Status and creates a ZIP for each day under </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">.\Status\Archive</span><span class="Apple-style-span" style="font-family:Arial;"> in the format </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">“LOGS-YYMMDD.ZIP”</span><span class="Apple-style-span" style="font-family:Arial;">  (while emailing the error logs to the Gmail account). Temporary copies of the Success and Error logs are also put into the Success and Error folders, for processing by </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG.BAT</span><span class="Apple-style-span" style="font-family:Arial;">.</span></div><br><div style="font-family:Arial;"></div><br><div><br><br><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">@ECHO OFF</span><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM ARCHIVE.BAT</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Email non-empty Data Loader error logs to a GMail account and</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM archive to a zip file all other log files (<em>.csv).</em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Main file to call from a scheduled task.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Intended to be launched from a subdirectory directly beneath the log folder.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Expects an error\ subdirectory to exist (status\archive\error).</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Temporarily stores error logs being emailed in errorlog.zip and</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM calls archivelogs.bat to store logs by date in LOGS-20??-??-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Uses as dependencies: checklog.bat, countln.vbs, sendmail.vbs, 7z.<em></em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Checklog.bat is stored in subdirectories .\error and .\success. </span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM All others in status\archive next to this file.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Bring logs down to a working folder, to avoid gaps in process</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF EXIST ..\.csv MOVE ..*.csv .</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF NOT EXIST <em>.csv GOTO Done</em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Buffer errors and archive latest logs (\error must exist)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF EXIST error.csv COPY error<em>.csv error\</em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF EXIST success.csv COPY success<em>.csv success\</em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">SET TDate=%date:~10,4%%date:~4,2%%date:~7,2%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">.\7z.exe a LOGS-%TDate%.zip .csv</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF ERRORLEVEL 1 GOTO Done</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF NOT EXIST LOGS-%TDate%.zip GOTO Done</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">ERASE <em>.csv</em></span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Cleanup errorlog.zip before calling errorlogs.bat</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">SET ZIP=(TBD: Full path to a local working directory)\errorlog.zip</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF EXIST %ZIP% ERASE %ZIP%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Call checklog for each error log.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CD error</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">FOR %%x IN ( error.csv ) DO CMD.EXE /C checklog.bat %%x %%ZIP%%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">ECHO Emailing: %ZIP%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Attachment path cannot be relative</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CSCRIPT ..\sendmail.vbs <a href="mailto:ccsa.alert@gmail.com" target="_blank" rel="noopener">ccsa.alert@gmail.com</a> “Alert! Data Load Failed.” “The Data Loader was unable to push records to Salesforce.” “%ZIP%”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CD ..</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Cleanup successlog.zip before calling checklogs.bat</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">SET ZIP=(TBD: Full path to a local working directory)\successlog.zip</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">IF EXIST %ZIP% ERASE %ZIP%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Call checklog for each success log.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM –</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CD success</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">FOR %%x IN (success*.csv ) DO CMD.EXE /C checklog.bat %%x %%ZIP%%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">ECHO Emailing: %ZIP%</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">REM Attachment path (%ZIP%) cannot be relative</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CSCRIPT ..\sendmail.vbs (<a href="mailto:TBD@TBD.COM" target="_blank" rel="noopener">TBD@TBD.COM</a>) “Alert! Data Load Succeeded.” “The Data Loader was able to push records to Salesforce.” “%ZIP%”</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">CD ..</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">:Done</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:xx-small;">ECHO Archive process complete.</span></div><br><div style="font-family:Arial;"></div><br></div><br><div><span class="Apple-style-span" style="font-family:Arial;">The second </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKLOG</span><span class="Apple-style-span" style="font-family:Arial;"> call to the success folder is optional. When left in place, the system will email the success and error logs separately, in case the administrator wants assurance that the system is running successfully on schedule. </span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:Arial;">Another option would be to check for certain types of fatal errors. One fatal case would be someone renaming a target field in Salesforce without updating the Apex Data Loader configuration. If the mapping file refers to a field that no longer exists, the Data Loader generates a zero-length success log (with not even a header row). The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">CHECKFATAL.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> alternative only ZIPs for emailing any success logs that are totally empty. </span></div><br><div style="font-family:Arial;"></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">@ECHO OFF</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">REM CHECKFATAL.BAT</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">REM Count the lines and send only fatal errors, if any. Only use in Success folder.</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">ECHO CountLn: %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">CSCRIPT ..\countln.vbs %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">IF ERRORLEVEL 2 ERASE %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">IF EXIST %1 ..\7z.exe a %2 %1</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">ECHO Check fatal process complete.</span></div><br><div></div><br><div><span class="Apple-style-span" style="font-family:Arial;">The final touch is to prune the logs every so often. The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">PRUNELOGS.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> batch file can be run once a month, on the first of the month. Based on the date represented by the file name, </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">PRUNELOGS.BAT</span><span class="Apple-style-span" style="font-family:Arial;"> retains 2-3 months of logs, based on the current month, and deletes the rest. </span></div><br><div style="font-family:Arial;"></div><br><div><br><br><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">@ECHO OFF</span><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">REM PRUNELOGS.BAT</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">REM ZIP delete the archive for month before last (retain 2-3 months of logs)</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">REM Intended to be called on the 1st day of each month</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">SET MM %date:~-10,2</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “01” ERASE LOGS-20??-11-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “02” ERASE LOGS-20??-12-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “03” ERASE LOGS-20??-01-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “04” ERASE LOGS-20??-02-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “05” ERASE LOGS-20??-03-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “06” ERASE LOGS-20??-04-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “07” ERASE LOGS-20??-05-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “08” ERASE LOGS-20??-06-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “09” ERASE LOGS-20??-07-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “10” ERASE LOGS-20??-08-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “11” ERASE LOGS-20??-09-??.ZIP</span></div><br><div><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">IF “%MM%“ == “12” ERASE LOGS-20??-10-??.ZIP</span></div><br><div style="font-family:Arial;"></div><br></div><br><div style="font-family:Arial;">With these patches in place, the Apex Data Loader can be a safe and reliable way to automatically import data files generated by another system. Though, no data integration system is foolproof, and you should still devise a custom validation report that runs every day to confirm that data is flowing into the system as expected.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;"><br><br>While it would be wonderful if we could originate and retain all of our enterprise data only in Salesforce CRM, in real life, we still need to integrate with other systems, and, when we do, tools like the Apex Data Loader, with a pinch of salt, can help us get the job done.<br><br>For more Data Loader tips, drop by the blog <a href="http://www.apexdataloader.com/" target="_blank" rel="noopener">Using the Apex Data Loader with Salesforce</a>.<br><br></div>
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/salesforce/">Salesforce</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-salesforce-open-source-pioneer" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/salesforce-open-source-pioneer/">Salesforce – Open Source Pioneer</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2012/salesforce-open-source-pioneer/" class="article-date">
  <time datetime="2012-04-04T17:00:00.000Z" itemprop="datePublished">2012-04-04</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/essay/">Essay</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class="separator" style="clear:both;text-align:center;"><a href="http://opensource.org/" target="_blank" rel="noopener"><img src="http://opensource.org/files/garland_logo.png" alt=""></a></div><br><strong><span class="Apple-style-span" style="font-family:inherit;"><br></span></strong></p>
<p><div style="display:inline !important;"><span class="Apple-style-span" style="font-family:inherit;">Before joining NimbleUser, I spent a decade working with open source software and participating in open source communities. Being part of an open source community, and helping to improve tools we use every day, is an enlightening experience, outside the scope of simple blog entry.<br></span></div></p>
<p><div style="display:inline !important;"></div></p>
<p><div><span class="Apple-style-span" style="font-family:inherit;">And I miss it. I’ve tried to stay involved with new projects like Vosao CMS, I answer mail sent to human-response at apache-dot-org, I speak at ApacheCon when I can, and I’m trying to bootstrap an advocacy site with Tim O’Brien. But, it’s a struggle to keep up with other projects when I’m still learning so much every day about the Salesforce CRM platform. </span></div><br><span class="Apple-style-span" style="font-family:inherit;">One consolation is that Salesforce is built with many products I touched during my open source decade. I worked with Doug Cutter and Jon Stevens to migrate Lucene to Apache Jakarta. Salesforce uses several Apache Commons products that I helped create (along with the Commons itself). So, although I don’t get to work on open source projects as much as I used to, I am grateful to be working with a solid, thoughtful product built on a backbone of truly awesome open source components</span></p>
<h2 id="Core-infrastructure"><a href="#Core-infrastructure" class="headerlink" title="Core infrastructure"></a>Core infrastructure</h2><p><a href="http://www.salesforce.com/customer-resources/learning-center/" target="_blank" rel="noopener"><img src="http://www2.sfdcstatic.com/common/assets/img/logo-new.png" alt=""></a>Salesforce.com pioneered cloud computing. Its combined Software-as-a-Service and Platform-as-a-Service offering handles 100,000+ customers, over 2.1 million users, 30+ million lines of third-party code, and hundreds of terabytes of data, running on its own blend of open source, proprietary, and custom code. [<a href="http://www.blogger.com/blogger.g?blogID=5208774#Resources" target="_blank" rel="noopener">Wikipedia</a>]</p>
<p>While the Salesforce platform uses the Oracle Database system as the basis as its backend data store, the web infrastructure is powered by several open source products, like <strong>Caucho Resin</strong>. The Resin Application Server is a high-performance XML application server for use with JSPs, servlets, JavaBeans, XML, and a host of other technologies. [<a href="http://www.blogger.com/blogger.g?blogID=5208774#Resources" target="_blank" rel="noopener">Hurwitz</a>]</p>
<h2 id="Fulltext-search"><a href="#Fulltext-search" class="headerlink" title="Fulltext search"></a>Fulltext search</h2><p>To help users find data quickly and easily, in 2002, Salesforce.com added the open source <strong>Apache Lucene</strong> search engine to its technology stack. Today, Lucene to manages an eight terabyte index of about twenty billion documents on the Salesforce platform. The Salesforce/Lucene cluster consists of roughly sixteen machines, which in turn contain many small (sharded) Lucene indexes. The system handles roughly 4000 queries per second, and it provides an incremental indexing model where the new Salesforce user data is searchable within approximately three minutes, through use of a custom optimizer. [<a href="http://www.blogger.com/blogger.g?blogID=5208774#Resources" target="_blank" rel="noopener">Igvita</a>]</p>
<h2 id="Quality-assurance"><a href="#Quality-assurance" class="headerlink" title="Quality assurance"></a>Quality assurance</h2><p>Salesforce.com brings out three major releases a year, and to keep development on track, their quality assurance team runs 50,000 tests a day. About 20,000 of those tests run under the open source <strong>Selenium</strong> web application testing system. Selenium supports exporting tests to native application languages, like Java and C#, and a Salesforce.com engineer open sourced an extension for its own language, Apex. [<a href="http://www.blogger.com/blogger.g?blogID=5208774#Resources" target="_blank" rel="noopener">Porro, Nagata</a>]</p>
<h2 id="User-facing-tools"><a href="#User-facing-tools" class="headerlink" title="User-facing tools"></a>User-facing tools</h2><p>Several of the Salesforce external data manipulation tools are built with open source components or are themselves open source. The indispensible <strong>Salesforce IDE</strong> is an <strong>Eclipse</strong> plugin. The popular <strong>Force.com Excel Connector</strong> is hosted at code.google.com. Responses to Outbound Messages are handled by the <strong>Apache Commons Connection Pool</strong>. The very useful <strong>Apex Data Loader</strong> is powered by the <strong>Spring Framework</strong> and <strong>Apache Commons BeanUtils</strong>. Since the Data Loader is open source, an OSX version sprang up (<strong>LexiLoader</strong>), and there is also an open source wizard (<strong>DataLoaderCliq</strong>) to help with Data Loader automation.</p>
<h2 id="Advocacy"><a href="#Advocacy" class="headerlink" title="Advocacy"></a>Advocacy</h2><p>At its 2011 Dreamforce Conference, Salesforce.com offered an entire track of presentations that encouraged users to adopt other open source tools, including a developer session entitled “<strong>Build Better Apps with Open Source</strong>”. On an ongoing basis, Salesforce.com hosts an <strong>Open Source forum</strong> as part of its support site. [<a href="http://www.blogger.com/blogger.g?blogID=5208774#Resources" target="_blank" rel="noopener">SFDC</a>]</p>
<p>By leveraging a solid core of open source packages, and mixing in its own proprietary customizations, Salesforce is able to deliver a robust, configurable platform, upon which millions of business users rely every day.</p>
<p><span class="Apple-style-span" style="font-size:24px;font-weight:bold;">Products mentioned</span></p>
<ul>
<li><a href="http://www.salesforce.com/" target="_blank" rel="noopener">Salesforce CRM</a></li>
<li><a href="http://www.caucho.com/resin/" target="_blank" rel="noopener">Caucho Resin</a></li>
<li><a href="http://lucene.apache.org/java/docs/index.html" target="_blank" rel="noopener">Apache Lucene</a></li>
<li><a href="http://seleniumhq.org/" target="_blank" rel="noopener">Selenium</a></li>
<li><a href="http://eclipse.org/" target="_blank" rel="noopener">Eclipse</a></li>
<li><a href="http://wiki.developerforce.com/page/Apex_Data_Loader" target="_blank" rel="noopener">Force.com Excel Connector</a></li>
<li><a href="http://commons.apache.org/dbcp/" target="_blank" rel="noopener">Apache Commons Database Connection Pool</a></li>
<li><a href="http://wiki.developerforce.com/page/Apex_Data_Loader" target="_blank" rel="noopener">Apex Dataloader</a></li>
<li><a href="http://commons.apache.org/beanutils/" target="_blank" rel="noopener">Apache Commons BeanUtils</a></li>
<li><a href="http://www.springsource.org/" target="_blank" rel="noopener">Spring Framework</a></li>
<li><a href="http://www.pocketsoap.com/osx/lexiloader/" target="_blank" rel="noopener">LexiLoader</a></li>
<li><a href="http://code.google.com/p/dataloadercliq/" target="_blank" rel="noopener">DataLoaderCliq</a></li>
</ul>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a><a href="http://www.blogger.com/blogger.g?blogID=5208774" target="_blank" rel="noopener">References</a></h2><ol>
<li>[Hurwitz] <a href="http://judithbalancingact.com/2008/05/29/is-there-beef-behind-salesforcecom/" target="_blank" rel="noopener">Is there beef behind SalesForce.Com?</a></li>
<li>[Wikipedia] <a href="http://en.wikipedia.org/wiki/Salesforce.com" target="_blank" rel="noopener">Salesforce.com.</a></li>
<li>[Igvita] <a href="http://www.igvita.com/2010/10/22/open-source-search-with-lucene-solr/" target="_blank" rel="noopener">Lucene in the wild: Salesforce, LinkedIn, Twitter, et al.</a></li>
<li>[Porro, Nagata] <a href="http://www.youtube.com/watch?v=TXNI9SRW1sY" target="_blank" rel="noopener">How to test Salesforce Apps with Selenium.</a></li>
<li>[SFDC] <a href="http://wiki.developerforce.com/page/Apex_Data_Loader" target="_blank" rel="noopener">Apex Data Loader</a>, <a href="http://developer.force.com/dreamforce/11/session/Build-Better-Apps-Using-Open-Source-Code" target="_blank" rel="noopener">Build Better Apps Using Open Source</a>, <a href="http://blogs.developerforce.com/reid-carlberg/2011/08/dreamforce-open-source-lab-sponsored-by-github-schedule.html" target="_blank" rel="noopener">Open Source Labs tract</a>, <a href="http://boards.developerforce.com/t5/Open-Source/bd-p/sforceExplorer" target="_blank" rel="noopener">Open Source Forum</a>.</li>
</ol>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/open-source/">Open Source</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/salesforce/">Salesforce</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-sun-goes-nova-cloud-intact" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/sun-goes-nova-cloud-intact/">Sun goes Nova. Cloud intact.</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2012/sun-goes-nova-cloud-intact/" class="article-date">
  <time datetime="2012-04-01T09:00:00.000Z" itemprop="datePublished">2012-04-01</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/essay/">Essay</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <div class="separator" style="clear:both;text-align:center;"><a href="https://www.youtube.com/watch?v=6KTb8CJoj04" target="_blank" rel="noopener"><img src="https://i.ytimg.com/vi/6KTb8CJoj04/hqdefault.jpg" alt=""></a></div><br>The Internet was designed to survive a nuclear holocaust, but no one expected to find social media networks still available after the Sun’s surprise flare-up on Saturday.<br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">“While we talk about the bits being in the cloud, most of the Internet is actually underground,” explained Internet Guru <a href="http://securitytango.com/" target="_blank" rel="noopener">Nick Francesco</a>. “Although the solar flare burned off the ozone, condemning us all to a slow painful death, the good news is that we can still tweet about it.”</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">Saturday’s Twitter volume during the flare eclipsed the recent record set during the season finale of <a href="http://twitpic.com/929lsx]" target="_blank" rel="noopener">Pretty Little Liars</a>. The light from the flare made earthfall at 7:48a EST, had its own Twitter account (<a href="https://twitter.com/#!/AngiesRightLeg" target="_blank" rel="noopener">@SunFlare</a>) by 7:50a, and 439,624 followers by 8:15a. By noon, over 700,000 tweets referenced the flare, including choice nuggets like<br><a name="more"></a></div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;"><span class="Apple-style-span" style="color:#666666;">@Ecc19 “</span>Wow! Something new over the earth.”</div><br><div style="font-family:Arial;"><span class="Apple-style-span" style="color:#666666;">@SmileKid13</span> “#WorstDayEver #SunGoesViral.”</div><br><div style="font-family:Arial;"><span class="Apple-style-span" style="color:#666666;">@Groupon</span> “Designer Sunglasses - B1G1 - today only!</div><br><div style="font-family:Arial;"><span class="Apple-style-span" style="color:#666666;">@JStorm</span> “Flame On!”</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">Elsewhere, <a href="http://www.youtube.com/watch?v=Nnl-yQjGYBs&amp;feature=related" target="_blank" rel="noopener">Facebook</a> exploded with blurry iPhone photos of a dilating ball of light, and most <a href="http://thecynicalgirl.com/your-linkedin-group-probably-sucks/" target="_blank" rel="noopener">LinkedIn</a> statuses changed to “Ready to move. Call me.”. The flare passed through <a href="http://www.facebook.com/pages/Google-Plus-Sucks/202649716452006" target="_blank" rel="noopener">Google+ </a>without a ripple, since most of the plussies were busy updating their last known address on <a href="http://www.youtube.com/watch?v=CznVPlAunk8" target="_blank" rel="noopener">Plaxo</a>.</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;">Salesforce expects <a href="http://www.youtube.com/watch?v=chkLP6FdUZA" target="_blank" rel="noopener">Chatter</a> volume to soar on Monday, as burn-outs return to work after a long, hairy weekend. “The flare is a real opportunity for growth,” blogged founder Marc Benioff. “Nothing brings out net-new leads like a good fire sale.”</div><br><div style="font-family:Arial;"></div><br><div style="font-family:Arial;"><br><div>For more, see</div><br><div><br><br><em>   <a href="http://tedhusted.blogspot.com/2009/04/twitter-too-much-and-not-enough.html" target="_blank" rel="noopener">Too Much Twitter and Not Enough</a>
</em>   <a href="http://tedhusted.blogspot.com/2007/04/geeks-glossary-asf-edition-recently-we.html" target="_blank" rel="noopener">Geeks Glossary</a><br><em>   <a href="http://tedhusted.blogspot.com/2006/04/truth-with-jokes-q-are-asf-committers.html" target="_blank" rel="noopener">The Truth with Jokes </a>
</em>   <a href="http://en.wikipedia.org/wiki/April_Fools%27_Day" target="_blank" rel="noopener">The Truth without Jokes</a><br>*   and … <a href="http://www.youtube.com/watch?v=NfZ4q86ekS4&amp;context=C4be1ba2ADvjVQa1PpcFNeL5vOXud6ym9Iyt54c-yNBuBvySkkoVQ=" target="_blank" rel="noopener">How Geeks Should Prepare for Disaster</a><br></div><br></div>
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/satire/">Satire</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-catch-me-on-the-flip-side-responding-to-outbound-messages-in-salesforce-crm" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/catch-me-on-the-flip-side-responding-to-outbound-messages-in-salesforce-crm/">Catch me on the flip-side: Responding to Outbound Messages in Salesforce CRM</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2012/catch-me-on-the-flip-side-responding-to-outbound-messages-in-salesforce-crm/" class="article-date">
  <time datetime="2012-03-29T09:00:00.000Z" itemprop="datePublished">2012-03-29</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/tutorial/">Tutorial</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><div class="separator" style="clear:both;text-align:center;"><a href="https://www.flickr.com/photos/spacemanbob/1084139169" target="_blank" rel="noopener"><img src="https://farm2.staticflickr.com/1130/1084139169_e272bc1f81_z.jpg" alt=""></a></div><br>In a <a href="http://tedhusted.blogspot.com/2012/03/unloading-salesforce-crm-data-with.html" target="_blank" rel="noopener">previous blog</a>, we walked through example code for an Outbound Message Listener. We covered the essentials, but Salesforce CRM offers a nifty twist on just sending an outbound message to an external system. Not only can a system receive a message, it can send back a response. For example, if the outbound message inserts a record, the external system can send back the record’s key.</p>
<p><a name="more"></a>Our example Listener called a worker method that handled the messages in a foreach loop. Using the case of returning an external key, we can add the keys to a hashtable, and send back a batch at the end all of the responses. We’ll pickup the live action towards the end of the foreach loop from the <a href="http://tedhusted.blogspot.com/2012/03/unloading-salesforce-crm-data-with.html" target="_blank" rel="noopener">previous example</a>.</p>
<p><pre> <strong>Hashtable responsePayload = newHashtable();  // Returns IDs to SF</strong><br> foreach (AccountNotification message in n.Notification)<br> {<br>     sf = message.sObject;</pre></p>
<p><pre>     // – Check cache –<br>     // …<br>     // – handle message –<br>     // …<br>     // Queue ID for return to SF<br>     <strong>responsePayload.Add(sf.Id, my.Id);</strong><br> } // end foreach loop<br> // – Return IDs to SF –<br> <strong>log.Info(“Info: Sending response to Salesforce …”);</strong><br> <strong>Response response = new Response();</strong></pre></p>
<p><pre> <strong>log.Info(response.Send(“Account”, responsePayload));</strong><br> return;<br>}</pre><br>The Response class is a wrapper around a <span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;font-size:x-small;">SForceService</span> instance which returns a String we can use as a logging statement.</p>
<p><pre>class Response<br>{<br>    private SforceService service;<br>    public Response() { }<br>    public String Send(String objectName, Hashtable payload)<br>    {<br>        return this.Send(objectName, payload, “External_Id__c”);<br>    }<br>    public String Send(String objectName, Hashtable payload, String syncFieldName)<br>    {<br>        if (payload == null || payload.Count == 0) return</pre></p>
<p><pre>            “No records updated. Response.Send() not needed.”;<br>        try<br>        {<br>            service = new SforceService();<br>            LoginResult loginResult = service.login(<br>                ConfigurationManager.AppSettings[“Salesforce.Username”],<br>                ConfigurationManager.AppSettings[“Salesforce.Password”] +<br>                ConfigurationManager.AppSettings[“Salesforce.Token”]<br>            );<br>            service.SessionHeaderValue = new SessionHeader();<br>            service.SessionHeaderValue.sessionId = loginResult.sessionId;<br>            service.Url = loginResult.serverUrl;<br>            GetUserInfoResult userInfo = loginResult.userInfo;<br>            List sObjects = new List();<br>            sObject s = new sObject();<br>            XmlDocument xmlDocument = new XmlDocument();<br>            List elements;<br>            XmlElement element;<br>            foreach (String sfid in payload.Keys)<br>            {<br>                s = new sObject();<br>                s.Id = sfid;<br>                s.type = objectName;<br>                elements = newList();<br>                element = xmlDocument.CreateElement(syncFieldName);<br>                element.InnerText = ht[sfid].ToString();<br>                elements.Add(element);<br>                s.Any = elements.ToArray();<br>                sObjects.Add(s);<br>            }<br>            SaveResult[] saveResults = service.update(sObjects.ToArray());<br>            String output = String.Empty;<br>            foreach (SaveResult sr in saveResults)<br>            {<br>                if (sr.success)<br>                {<br>                    output += String.Format(</pre></p>
<p><pre>“{0} Response Sync Success : sf.id=\”{1}\””, objectName, sr.id) + “\n”;<br>                }<br>                else<br>                {<br>                    foreach (Error err in sr.errors)<br>                    {<br>                        output += String.Format(</pre></p>
<p><pre>“{0} Response Sync Error : sf.id=\”{1}\”, {2}”, objectName, sr.id, err.message) +</pre></p>
<p><pre>“\n”;<br>                    }<br>                }<br>            }<br>            return output;<br>        }<br>        catch (Exception ex)<br>        {<br>            return ex.Message + “ — “ + ex.StackTrace;<br>        }<br>    }<br>}</pre><br>The credentials and API service endpoint are declared in the Web.Config file.</p>
<p><pre></pre><br><a href="https://test.salesforce.com/services/Soap/u/24.0" target="_blank" rel="noopener">https://test.salesforce.com/services/Soap/u/24.0</a></p>
<p>(In a production environment, replace “test.salesforce.com” with “<a href="http://www.salesforce.com&quot;." target="_blank" rel="noopener">www.salesforce.com&quot;.</a>)</p>
<p>Some caveats are</p>
<p>(1) The response needs credentials to login, and you might need to setup a system account for the response.</p>
<p>(2) To keep the message from recursing, the Response User needs to have outbound messaging disabled, or be specifically excluded from the Outbound Messaging Workflow.</p>
<p>(3) If your listener implements a producer/consumer queue, the response may not be immediate. (If tens of thousands of records are being updated by a slow system, it could be an hour or more!).</p>
<p>(4) An outbound message response may update the record while it’s being viewed by another user. If the user makes another change without refreshing the record, Salesforce will decline the second change, and the human user will have to refresh and repeat.</p>
<p>By allowing a response to an outbound message, Salesforce gives us the opportunity to close the loop. For example, if a record is being inserted into an external system, the response could return the external ID, for use with future updates.</p>
<p>While not a “point-and-click” product, like the Apex Dataloader, the outbound messaging API provides developers all the hooks we need to create a full-service data connection.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/salesforce/">Salesforce</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-in-data-we-trust" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/in-data-we-trust/">In Data We Trust</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2012/in-data-we-trust/" class="article-date">
  <time datetime="2012-03-27T09:00:00.000Z" itemprop="datePublished">2012-03-27</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/essay/">Essay</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <div class="separator" style="clear:both;text-align:center;"><a href="http://www.redcross.org/" target="_blank" rel="noopener"><img src="https://tedhusted.files.wordpress.com/2012/03/fa1a2-blood-drop.jpg" alt=""></a></div><div>Data is the lifeblood of a company. When data flows freely to those who need it most, business booms. But, should the flow stop, a business fails. According to the National Archives &amp; Records Administration, after a major data loss or extended data center outage (of ten days or more), most companies shut down within a year of the disaster. </div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">Despite the stakes, according to a national survey, many business do not have proper data backup. </span></div><div><div><br><br><em>   40% of Small and Medium Sized Businesses don’t back up their data at all.
</em>   Up to 50% of all backups are not fully recoverable and up to 60% of all backups fail in general.<br><em>   Since 2003, the majority of North American workers are mobile.
</em>   One-third of all computers sold are laptops, and 60% of all data is held on PC Desktops and laptops.<br>*   15% or more of laptop computers are stolen or suffer hard drive failures.</div><div><a name="more"></a>To avoid becoming a statistic, every day, more and more businesses are looking to cloud-based software-as-a-service vendors to provide a one-stop IT shop. </div></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">When workers have instant access to data and files through a web browser, people don’t feel the need to store key data on local machines. When data is centralized on the cloud, it can be backed up and maintained by the best and the brightest. Between Google Apps and Salesforce CRM, many professionals will have all the software they need, saving the cost of licensing and maintaining complex office suites. Today, cloud-based offices can securely access their data from any machine with an Internet connection and work seamlessly from any location.</span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">Of course, when a company moves core data to the cloud, it must be just as careful when choosing a IT provider as it should be when choosing IT personnel. The Salesforce CRM platform offers businesses a number of key safeguards, including trust.salesforce.com, release trains, and superb test coverage.  </span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;"><strong>trust.salesforce.com</strong> </span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">Saleforce.com believes that trust starts with transparency, and provides real-time information on system performance and security on a public web site that  anyone can visit at trust.salesforce.com. The <a href="http://trust.salesforce.com/trust/status/" target="_blank" rel="noopener">System Status panel</a> lists each of the Salesforce servers, flagging any current performance issues, and providing a RSS feed with historical information going back to Sep 2010. The trust.salesforce.com site also provides customers with background information on data integrity, security, and overall best practices. </span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;"><strong>Release Trains</strong></span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">Like clockwork, three times a year, Salesforce rolls out a major new release. All customers are upgraded automatically and seamlessly, at no additional cost, ensuring that everyone has all the latest fixes and improvements. The train model means that Salesforce.com can bring out new features incrementally. When the next train will be along in a couple of months, there’s no need to rush an under-developed feature to market. Certified administrators and developers must also pass a maintenance exam for every new release, assuring that key people are aware of the latest changes. </span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;"><strong>Test Coverage</strong></span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">Every day, Salesforce.com runs over 50,000 quality assurance tests on its own software. When Salesforce.com introduced the Apex customization language in 2009, mandatory test coverage was baked into the development model.  Salesforce.com provides a platform based on high-quality, thoroughly tested code, and expects custom developers to do the same. </span></div><div><span class="Apple-style-span" style="font-family:inherit;"><br></span></div><div><span class="Apple-style-span" style="font-family:inherit;">If you are ready for a safe, reliable, professionally-maintained business platform, Salesforce.com, the original Software as a Service provider, is still the best. </span></div><div style="font-family:Arial;"><span class="Apple-style-span" style="font-family:Arial, Helvetica, sans-serif;font-size:x-small;"><br></span></div>
      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/programming/">Programming</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/8/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/10/">Next &raquo;</a>
      </nav>
    </section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Ted Husted&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'ted-husted-com';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>