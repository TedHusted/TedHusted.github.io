






<!doctype html>
<html lang="default">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Ted Husted">
  
  
  
  
    <meta name="description" content="Recently, someone asked on the Ext list:

&gt; Is Diagraming your classes/code segments&gt; the best way to keep yourself&gt; organized during the programming stage?&gt; Or is there some more effic...">
  
  <title>Incremental Refactoring [ ted.husted.com ]</title>
  
    <link rel="alternate" href="/atom.xml" title="ted.husted.com">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">
  
</head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2007/03/16/s2-tip-always-set-devmode-to-false-in-production/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        S2 Tip - Always set devMode to false in production
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2007/03/14/googlecode-whats-the-diff/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        GoogleCode: What's the diff?
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="http://2.gravatar.com/avatar/87a93952bc3587bbed2ab94ae88342af"/>
          <div id="homelink">ted.husted.com</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/index.html">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">Posts</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">Categories</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">Tags</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">About</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/TedHusted">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  <article id="post">
    <h1>Incremental Refactoring</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2007-03-15</span>
      
        <span id = "post-title-updated">Updated at 2017-02-18</span>
      
      
      <span id = "post-title-categories">Category
      
      
        
        
        <a href="/categories/Tutorials/">Tutorials</a>
      
      </span>
      
      
      <span id = "post-title-tags">
      Tag
      
      
        
        
        <a href="/tags/Programming/">Programming</a>
      
      </span>
      
    </p>
    
    <p>Recently, someone asked on the <a href="http://www.yui-ext.com/forum/viewtopic.php?t=2797" target="_blank" rel="external">Ext list</a>:</p>
<blockquote>
<p><pre>&gt; Is Diagraming your classes/code segments<br>&gt; the best way to keep yourself<br>&gt; organized during the programming stage?<br>&gt; Or is there some more efficient<br>&gt; and easier way to do it?</pre><br>I thought the advice of the Ext lead developer, Jack Slocum, beared repeating.<br>The approach I have found to be most effective is “incremental refactoring”. This means starting out with a basic idea of how your object model should look. It will probably be raw and imperfect, but you know that and knowing that is the key to what makes it work.</p>
<p>Start out small and make pieces of it work. While it’s small (and not a big object model with all kinds of pieces to develop before you have anything working) you should be able to find various imperfections with your initial design (like browser problems!) and you can refactor while it’s still cheap. As soon as you have something working, it’s time to refactor to look for ways to make things more generic, cut code duplication, improve interfaces and efficiency. Then start on the next piece in the same way.</p>
<p>The most important thing is you have to think OO, think efficiency and know your patterns. Once this is in place, the rest is kind of automatic.<br>IMHO, one of the best books on “incremental refactoring” (or successive refinement) is “<a href="http://www.amazon.com/exec/obidos/ASIN/0321146530/husteddotcom-20" target="_blank" rel="external">Test Driven Development: By Example</a> by Kent Beck. While it doesn’t mean to be about successive refinement per se, that’s exactly what Beck is doing in the book. At 240 pages, it also has the virtue of being relatively brief.</p>
</blockquote>
<p>As he codes, Beck keeps a running TODO list of the next baby-steps needed to finish a larger task. Beck says he keeps his on paper, but I use a text file. I even post the running list to the issue tracker, like a mini-progress report.</p>
<p>Successive refinement works well with an issue tracker that supports roadmaps (like JIRA). We can then organize the major features into iterations or milestones and ship one iteration at a time. Ideally, each milestone should be a working, if incomplete, version of the target application.</p>
<p>At work, we follow the usual <a href="http://www.extremeprogramming.org/" target="_blank" rel="external">Extreme Programming</a> model, except that we prefer formal <a href="http://opensource.atlassian.com/confluence/oss/display/STRUTS/Use+Cases" target="_blank" rel="external">use cases</a> to XP stories. (See Cockburn’s “<a href="http://www.amazon.com/exec/obidos/ASIN/0201702258/husteddotcom-20" target="_blank" rel="external">Writing Effective Use Cases</a>“. It weighs in at 270 pages, but the first 20 pages tell you everything you actually need to know.)</p>
<p>Essentially, XP interations are successive refinements, which is an approach Nicholas Wirth was advocating decades ago, when he <a href="http://www.pascal-central.com/top10.html" target="_blank" rel="external">designed Pascal</a>. The key is to organize your work so that there is some kind of working application at every step of the way – even if you have to fake some of the resources. :)</p>
<p>In working with Ajax and JSON, one pleasant surprise is how easy it can be to fake resources. For example, the YUI connection manager can accept a JSON object, but it doesn’t care if the object came from a XHR request or static data. We can switch between a set of test data and the live stream with one line of code.</p>
<pre><code>LISTER.init = function (data)  {
PhoneBook.rpc.entry_list(LISTER.load).call(ANVIL.channel); // live database
// LISTER.load(LISTER.localData); // static data
};
LISTER.localData = {
&quot;result&quot; : [[&apos;c5b6bbb1-66d6-49cb-9db6-743af6627828&apos;, &apos;Clinton&apos;, &apos;William&apos;,
&apos;555-743-7828&apos;, &apos;bubba&apos;, &apos;08/19/1992&apos;, 37.5, &apos;0&apos;],
[&apos;7c424227-8e19-4fb5-b089-423cfca723e1&apos;, &apos;Roosevelt&apos;, &apos;Theodore&apos;,
&apos;555-743-8942&apos;, &apos;bull&apos;, &apos;09/14/2002&apos;, 37.5, &apos;0&apos;],
[&apos;9320ea40-0c01-43e8-9cec-8fb9b3928c2c&apos;, &apos;Kennedy&apos;, &apos;John F.&apos;,
&apos;555-743-3928&apos;, &apos;fitz&apos;, &apos;05/29/1987&apos;, 37.5, &apos;0&apos;],
[&apos;3b27c933-c1dc-4d85-9744-c7d9debae196&apos;, &apos;Pierce&apos;, &apos;Franklin&apos;,
&apos;555-743-7919&apos;, &apos;benji&apos;, &apos;11/18/1984&apos;, 35, &apos;0&apos;],
[&apos;554ff9e7-a6f5-478a-b76b-a666f5c54e40&apos;, &apos;Jefferson&apos;, &apos;Thomas&apos;,
&apos;555-743-5440&apos;, &apos;monty&apos;, &apos;07/04/1976&apos;, 37.5, &apos;0&apos;]]
};
</code></pre><p>Now <em>that’s</em> how you spell MVC!</p>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    
  </div>
</div>

  
<nav id="pagination">
  
    <a href="/2007/03/16/s2-tip-always-set-devmode-to-false-in-production/" class="prev">&larr; Prev post S2 Tip - Always set devMode to false in production</a>
  

  

  
    <a href="/2007/03/14/googlecode-whats-the-diff/" class="next">Next post GoogleCode: What's the diff? &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
      
      <div id="disqus_thread"></div>
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Ted Husted using
      <a href="http://hexo.io">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>


  <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//ted-husted-com.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="http://2.gravatar.com/avatar/87a93952bc3587bbed2ab94ae88342af">
    <p id="description">Ted Husted is a coder, writer, and speaker. All told, Ted has been creating and deploying business applications since 1984, first for the desktop, then for the Internet, and now for the Cloud.</p>
    <ul class="social-icon">
  
  
    <li>
      <a href="http://ted.husted.com/atom.xml">
        
          <i class="icon iconfont rss">&#xe60e;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://twitter.com/TedHusted">
        
          <i class="icon iconfont twitter">&#xe600;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://github.com/TedHusted">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>


  <script>
if(isTriggerAnalytics) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', '92185980', 'auto');
  ga('send', 'pageview');
}

</script>



  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = "";
var unsplashConfig = "";
// is show background images
var turnoffBackgroundImage = false;



  turnoffBackgroundImage = true;


var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

